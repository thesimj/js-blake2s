'use strict';var _createClass=function(){function e(f,g){for(var j,h=0;h<g.length;h++)j=g[h],j.enumerable=j.enumerable||!1,j.configurable=!0,'value'in j&&(j.writable=!0),Object.defineProperty(f,j.key,j)}return function(f,g,h){return g&&e(f.prototype,g),h&&e(f,h),f}}();function _classCallCheck(e,f){if(!(e instanceof f))throw new TypeError('Cannot call a class as a function')}var _BLAKE2S_IV=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],_BLAKE2S_SIGMA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0],JSBlake2s=function(){function e(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,j=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e);var k=g?g.length:0;h=h?[this._get32(h,0),this._get32(h,4)]:[0,0],j=j?[this._get32(j,0),this._get32(j,4)]:[0,0],this._hash=[_BLAKE2S_IV[0]^this._get32([f,k,1,1],0),_BLAKE2S_IV[1],_BLAKE2S_IV[2],_BLAKE2S_IV[3],_BLAKE2S_IV[4]^h[0],_BLAKE2S_IV[5]^h[1],_BLAKE2S_IV[6]^j[0],_BLAKE2S_IV[7]^j[1]],this._block=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._pointer=0,this._counter=0,this._length=f,0<k&&(this.update(g),this._pointer=64)}return _createClass(e,[{key:'update',value:function update(f){for(var g=0;g<f.length;g++)64===this._pointer&&(this._counter+=this._pointer,this._compress(!1),this._pointer=0),this._block[this._pointer++]=f[g];return this}},{key:'digest',value:function digest(){var f=new Uint8Array(this._length);for(this._counter+=this._pointer;64>this._pointer;)this._block[this._pointer++]=0;this._compress(!0);for(var g=0;g<this._length;g++)f[g]=this._hash[g>>2]>>>8*(3&g);return f}},{key:'_rotr',value:function _rotr(f,g){return f>>>g^f<<32-g}},{key:'_get32',value:function _get32(f,g){return f[g++]^f[g++]<<8^f[g++]<<16^f[g]<<24}},{key:'_gamma',value:function _gamma(f,g,h,j,k,l,n){f[g]+=f[h]+l,f[k]=this._rotr(f[k]^f[g],16),f[j]+=f[k],f[h]=this._rotr(f[h]^f[j],12),f[g]+=f[h]+n,f[k]=this._rotr(f[k]^f[g],8),f[j]+=f[k],f[h]=this._rotr(f[h]^f[j],7)}},{key:'_compress',value:function _compress(){var f=0<arguments.length&&void 0!==arguments[0]&&arguments[0],g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=void 0;for(j=0;8>j;j++)g[j]=this._hash[j],g[j+8]=_BLAKE2S_IV[j];for(g[12]^=this._counter,g[13]^=this._counter/4294967296,g[14]=f?~g[14]:g[14],j=0;16>j;j++)h[j]=this._get32(this._block,4*j);for(j=0;10>j;j++)this._gamma(g,0,4,8,12,h[_BLAKE2S_SIGMA[16*j]],h[_BLAKE2S_SIGMA[16*j+1]]),this._gamma(g,1,5,9,13,h[_BLAKE2S_SIGMA[16*j+2]],h[_BLAKE2S_SIGMA[16*j+3]]),this._gamma(g,2,6,10,14,h[_BLAKE2S_SIGMA[16*j+4]],h[_BLAKE2S_SIGMA[16*j+5]]),this._gamma(g,3,7,11,15,h[_BLAKE2S_SIGMA[16*j+6]],h[_BLAKE2S_SIGMA[16*j+7]]),this._gamma(g,0,5,10,15,h[_BLAKE2S_SIGMA[16*j+8]],h[_BLAKE2S_SIGMA[16*j+9]]),this._gamma(g,1,6,11,12,h[_BLAKE2S_SIGMA[16*j+10]],h[_BLAKE2S_SIGMA[16*j+11]]),this._gamma(g,2,7,8,13,h[_BLAKE2S_SIGMA[16*j+12]],h[_BLAKE2S_SIGMA[16*j+13]]),this._gamma(g,3,4,9,14,h[_BLAKE2S_SIGMA[16*j+14]],h[_BLAKE2S_SIGMA[16*j+15]]);this._hash[0]^=g[0]^g[8],this._hash[1]^=g[1]^g[9],this._hash[2]^=g[2]^g[10],this._hash[3]^=g[3]^g[11],this._hash[4]^=g[4]^g[12],this._hash[5]^=g[5]^g[13],this._hash[6]^=g[6]^g[14],this._hash[7]^=g[7]^g[15]}}]),e}();'undefined'!=typeof module&&module.exports&&(module.exports=JSBlake2s);
